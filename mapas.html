<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flujo de Backend para Creación de Tareas</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración de fuentes y colores personalizados -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary-blue': '#1E40AF',
                        'secondary-green': '#059669',
                        'gray-light': '#F3F4F6',
                        'gray-dark': '#1F2937',
                        'accent-yellow': '#FBBF24',
                    }
                }
            }
        }
    </script>
    <style>
        /* Estilos personalizados para simular la estructura del ejemplo de Delivery */
        .flow-card {
            border-bottom: 2px solid #D1D5DB; /* Línea separadora */
            padding-bottom: 1.5rem;
            min-height: 120px; /* Altura mínima para que se vea bien en columnas */
        }
        .flow-card:nth-child(even) {
            border-left: 2px solid #D1D5DB; /* Línea divisoria vertical */
            padding-left: 1.5rem;
        }

        /* Estilo para el modal (ventana flotante) */
        .modal {
            display: none; /* Oculto por defecto */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); /* Fondo semitransparente */
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-light font-sans p-4 md:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-10">

        <!-- Header y Botón de Autores -->
        <div class="flex flex-col sm:flex-row justify-between items-center mb-6 border-b pb-4">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-dark text-center sm:text-left mb-2 sm:mb-0">
                Flujo de Backend: Creación de Tarea (RF2.1)
            </h1>
            <button onclick="showModal('authorsModal')" 
                    class="bg-primary-blue hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition duration-200 shadow-md">
                Ver Autores
            </button>
        </div>
        
        <p class="text-lg text-center text-gray-600 mb-10 pb-4">
            Veamos qué pasa en la **Gestión de Tareas** cuando creas una nueva tarea.
        </p>

        <!-- Contenedor principal del flujo, similar al diseño del App de Delivery (2 columnas) -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-8">

            <!-- Paso 1: Recepción del pedido -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">01</p>
                <h2 class="text-xl font-semibold text-primary-blue border-b border-primary-blue pb-1">El Usuario Crea la Tarea</h2>
                <p class="text-sm mt-2 text-gray-700">El **Frontend** envía la solicitud (datos de la tarea, proyecto y responsable) a la API RESTful.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: El cliente hace su pedido ("Quiero una pizza").</p>
            </div>

            <!-- Paso 2: Verificación de cliente (Autenticación) -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">02</p>
                <h2 class="text-xl font-semibold text-gray-dark border-b border-gray-dark pb-1">Verifica Identidad y Roles (RF1.3)</h2>
                <p class="text-sm mt-2 text-gray-700">El **Backend Lógico** valida el Token JWT y verifica que el usuario tenga permisos para asignar tareas en ese proyecto.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: El sistema confirma tu identidad y método de pago.</p>
            </div>

            <!-- Paso 3: Almacenamiento -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">03</p>
                <h2 class="text-xl font-semibold text-secondary-green border-b border-secondary-green pb-1">Almacena la Tarea (RF2.1)</h2>
                <p class="text-sm mt-2 text-gray-700">La **Base de Datos** recibe y ejecuta la operación `INSERT` para crear la nueva entidad 'Tarea', asociándola al proyecto y al responsable.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: La base de datos verifica y guarda los "ingredientes".</p>
            </div>

            <!-- Paso 4: Notificación -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">04</p>
                <h2 class="text-xl font-semibold text-primary-blue border-b border-primary-blue pb-1">Genera Alerta (RF4.2)</h2>
                <p class="text-sm mt-2 text-gray-700">El **Backend Lógico** activa la lógica de notificaciones para alertar inmediatamente al responsable asignado.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: Se comunica con la API de pago (aquí, con el sistema de notificaciones).</p>
            </div>

            <!-- Paso 5: Flujo de Trabajo Inicial -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">05</p>
                <h2 class="text-xl font-semibold text-gray-dark border-b border-gray-dark pb-1">Asigna Flujo (3.2 Flujo Kanban)</h2>
                <p class="text-sm mt-2 text-gray-700">La tarea se marca por defecto con el estado **"Por Hacer"**, preparándola para el flujo de trabajo Kanban del equipo.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: El pedido llega a la cocina para preparar.</p>
            </div>

            <!-- Paso 6: Respuesta y Actualización de Vistas -->
            <div class="flow-card">
                <p class="text-2xl font-bold text-gray-400 mb-2">06</p>
                <h2 class="text-xl font-semibold text-secondary-green border-b border-secondary-green pb-1">Actualiza el Dashboard (RNF1.1)</h2>
                <p class="text-sm mt-2 text-gray-700">El servidor envía una respuesta de éxito (HTTP 201) al frontend, que refresca la lista de tareas y el Dashboard.</p>
                <p class="text-xs italic mt-1 text-gray-500">Analogía: Informas al cliente: "Tu pizza está en camino".</p>
            </div>
        </div>

        <div class="mt-8 text-center pt-4 border-t-2 border-gray-200">
            <p class="text-sm text-gray-600 font-bold">Todo esto pasa en segundos, mientras el usuario solo ve una pantalla de confirmación. ¡Así de poderoso es el backend!</p>
        </div>

    </div>

    <!-- Modal para Autores -->
    <div id="authorsModal" class="modal">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-11/12 md:w-1/3 transform transition-all">
            <h3 class="text-2xl font-bold text-gray-dark mb-4 border-b pb-2">
                Autores del Proyecto
            </h3>
            <ul class="space-y-2 text-gray-700 text-lg">
                <li class="flex items-center">
                    <span class="text-primary-blue mr-2">●</span> Iván Flores Chile
                </li>
                <li class="flex items-center">
                    <span class="text-primary-blue mr-2">●</span> Elvis Vega Quispe
                </li>
                <li class="flex items-center">
                    <span class="text-primary-blue mr-2">●</span> Evaristo Tapia Pacheco
                </li>
                <li class="flex items-center">
                    <span class="text-primary-blue mr-2">●</span> Josuee Abrahan Ttito Macapa
                </li>
            </ul>
            <div class="mt-6 text-right">
                <button onclick="hideModal('authorsModal')" 
                        class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-2 px-4 rounded-lg transition duration-200">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Script de JavaScript para manejar el Modal -->
    <script>
        function showModal(id) {
            const modal = document.getElementById(id);
            if (modal) {
                modal.style.display = 'flex';
            }
        }

        function hideModal(id) {
            const modal = document.getElementById(id);
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Cierra el modal si el usuario hace clic fuera de él
        window.onclick = function(event) {
            const modal = document.getElementById('authorsModal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
</body>
</html>
